// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}


model Equipo {
  id Int @id @default(autoincrement())
  nombre String @unique
  imagen String?

  locales Partido[] @relation(name: "local")
  visitas Partido[] @relation(name: "visita")
  ganadores Partido[] @relation(name: "ganador")
  @@map("equipos")
}

model Jornada {
  id Int @id @default(autoincrement())
  nombre String @unique
  fechaInicial DateTime @db.Date @map("fecha_inicial")
  fechaFinal DateTime @db.Date @map("fecha_final")

  paritdos Partido[]
  @@map("jornadas")
}

model Usuario {
  id Int @id @default(autoincrement())
  nombre String
  email String @unique
  password String
  tipoUsuario TipoUsuario @default(CLIENTE) @map("tipo_usuario")
  createdAt DateTime  @default(now()) @map("created_at")
  updateAt DateTime @updatedAt @map("updated_at")

  @@map("usuarios")
}

model Partido {
  id Int @id @default(autoincrement())
  fecha DateTime @db.Date
  hora DateTime? @db.Time()
  lugar String?
  resultadoLocal Int? @map("resultado_local")
  resultadoVisitante Int? @map("resultado_vistante")
  finalizado Boolean @default(false)
  empezado Boolean @default(false)
  equipoLocalId Int @map("equipo_local_id")
  equipoLocal Equipo @relation(fields: [equipoLocalId], references: [id], name: "local")
  equipoVisitaId Int @map("equipo_visita_id")
  equipoVisita Equipo @relation(fields: [equipoVisitaId], references: [id], name: "visita")
  ganadorId Int? @map("ganador_id")
  ganador Equipo? @relation(fields: [ganadorId], references: [id], name: "ganador")
  jornadaId Int @map("jornada_id")
  jornada Jornada @relation(fields: [jornadaId], references: [id])

  @@map("partidos")
}

enum TipoUsuario {
  ADMIN
  CLIENTE
}